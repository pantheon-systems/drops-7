/*! recline.view.nvd3 v0.3.0 */
var CSVT=_.clone(recline.Backend.CSV);!function(a){"use strict";a.__type__="csvt";var b="undefined"!=typeof jQuery&&jQuery.Deferred||_.Deferred;a.fetch=function(c){var d=new b;if(c.file){var e=new FileReader,f=c.encoding||"UTF-8";e.onload=function(b){var e=a.extractFields(a.parse(b.target.result,c),c);e.useMemoryStore=!0,e.metadata={filename:c.file.name},d.resolve(e)},e.onerror=function(a){d.reject({error:{message:"Failed to load file",code:a.target.error.code}})},e.readAsText(c.file,f)}else if(c.data){var g=a.extractFields(a.parse(c.data,c),c);g.useMemoryStore=!0,d.resolve(g)}else c.url&&jQuery.get(c.url).done(function(b){var e=a.extractFields(a.parse(b,c),c);e.useMemoryStore=!0,d.resolve(e)}).fail(function(a,b){d.reject({error:{message:b,request:a}})});return d.promise()},a.parse=function(b,c){var d=recline.Backend.CSV.parse(b,c);return c.transpose&&c.missingHeader&&(d=a.transpose(d),d[0]=d[0]||[],d[0][0]=c.missingHeader),d},a.transpose=function(a){if(!a.length)return[];if(a[0]instanceof Array){for(var b=a.length,c=a[0].length,d=new Array(c),e=b;e>0;e--)a[e-1].length!==c&&console.log("Index Error!");for(e=0;e<c;e++){d[e]=[];for(var f=0;f<b;f++)d[e][f]=a[f][e]}return d}return[]}}(CSVT),this.recline=this.recline||{},this.recline.Backend=this.recline.Backend||{},this.recline.Backend.CSVT=CSVT;